<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Login</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
<ion-grid>
    <div class="spacer-5x"></div>
    <ion-row class="ion-justify-content-center">
        <ion-col size-xs="11" size-sm="9" size-md="7" size-lg="5">
            <div class="ion-text-center">
                <img height="40" src="../../../../assets/placeholders/placeholder-logo.svg" alt="" srcset="">
            </div>
            <form [formGroup]="loginForm" (ngSubmit)="login()">
                <ion-item lines="none">
                  <ion-label position="floating">Email <ion-text color="danger">*</ion-text></ion-label>
                  <ion-input required formControlName="email" type="email"></ion-input>
                  <!-- Email Validation-->
                  <div class="validation-errors">
                    <ng-container *ngFor="let validation of validationMessasges.email">
                          <div class="validation-error-message"
                          *ngIf="loginForm
                            .get('email')
                            .hasError(validation.type) && (loginForm.get('email')
                            .dirty || loginForm.get('email').touched)">
                            {{ validation.message }}
                          </div>
                    </ng-container>
                  </div>
                </ion-item>
                <ion-item lines="none">
                    <ion-label position="floating">Password <ion-text color="danger">*</ion-text></ion-label>
                    <ion-input required formControlName="password" type="password"></ion-input>
                    <!-- Email Validation-->
                    <div class="validation-errors">
                      <ng-container *ngFor="let validation of validationMessasges.password">
                            <div class="validation-error-message"
                            *ngIf="loginForm
                              .get('password')
                              .hasError(validation.type) && (loginForm.get('password')
                              .dirty || loginForm.get('password').touched)">
                              {{ validation.message }}
                            </div>
                      </ng-container>
                    </div>
                </ion-item>
            </form>
              <div class="ion-text-center">
                <div class="spacer-3x"></div>
                <ion-button id="forgot-password-button" 
                (click)="showForgotPasswordModal()">
                    Forgot Password
                </ion-button>
              </div>
              <div class="spacer-1x"></div>
              <div class="ion-text-center">
                <ion-button id="cancel-button" 
                (click)="goHome()">
                    Cancel
                </ion-button>
              </div>
        </ion-col>
    </ion-row>
</ion-grid>


<ion-modal [isOpen]="this.forgotPasswordModal">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-title>Forgot Password</ion-title>
        </ion-buttons>
        <ion-buttons slot="end">
          <ion-button (click)="closeForgotPasswordModal()">
            <ion-icon name="close-outline"></ion-icon> 
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content id="forgot-password-modal">
      <ion-grid>
        <ion-row class="ion-justify-content-center">
          <ion-col size-xs="11">
            <div class="spacer-5x"></div>
            <swiper 
                [config]="config" 
                (swiper)="onSwiper($event)">

                <!-- Slide 1 / Email -->
                <ng-template swiperSlide>
                  <div class="static-alert-yellow">
                    <p>Please enter your email. A 4 digit code will be sent to it.</p>
                  </div>
                  <form [formGroup]="enterEmailForm" (ngSubmit)=changeName()>
                    <ion-item>
                      <ion-label position="floating">Email <ion-text color="danger">*</ion-text></ion-label>
                      <ion-input type="email" formControlName="email"></ion-input>
                      <!-- Email Validation-->
                      <div class="validation-errors">
                      <ng-container *ngFor="let validation of validationMessasges.email">
                        <div class="validation-error-message"
                        *ngIf="enterEmailForm
                          .get('email')
                          .hasError(validation.type) && (enterEmailForm.get('email')
                          .dirty || enterEmailForm.get('password').touched)">
                          {{ validation.message }}
                        </div>
                      </ng-container>
                      </div>
                    </ion-item>

                    <div class="spacer-5x"></div>
                    <ion-item
                      (click)="swiper.slideNext()"
                      class="ion-text-center" 
                      lines="none" 
                      button>
                      <ion-label>Next</ion-label>
                    </ion-item>
                    <ion-item
                      (click)="this.closeForgotPasswordModal()"
                      class="ion-text-center" 
                      lines="none" 
                      button>
                      <ion-label>Cancel</ion-label>
                    </ion-item>
                  </form>
                </ng-template>

                <!-- Slide 2 / Enter Code -->
                <ng-template swiperSlide>
                  <div class="static-alert-yellow">
                    <p>Please enter 4 digit code that was sent to:<br> [email].</p>
                  </div>
                  <form [formGroup]="enterCodeForm" (ngSubmit)="onSubmit()">
                    <ion-item>
                      <ion-label position="floating">Code <ion-text color="danger">*</ion-text></ion-label>
                      <ion-input type="text" name="text"></ion-input>
                    </ion-item>
  
                    <div class="spacer-5x"></div>
                    <ion-item
                      (click)="swiper.slideNext()"
                      class="ion-text-center" 
                      lines="none" 
                      button>
                      <ion-label>Next</ion-label>
                    </ion-item>
                    <ion-item
                      (click)="this.resendCode()"
                      class="ion-text-center" 
                      lines="none" 
                      button>
                      <ion-label>Resend</ion-label>
                    </ion-item>
                    <ion-item
                      (click)="this.closeForgotPasswordModal()"
                      class="ion-text-center" 
                      lines="none" 
                      button>
                      <ion-label>Cancel</ion-label>
                    </ion-item>
                    
                  </form>
                </ng-template>

                <!-- Slide 3 / New Password -->
                <ng-template swiperSlide>
                  <div class="static-alert-red">
                    <p>Create a new password. Has to be more than 7 characters, with one number.</p>
                  </div>
                  <form [formGroup]="newPasswordForm" (ngSubmit)="onSubmit()">
                    <ion-item>
                      <ion-label position="floating">New Password <ion-text color="danger">*</ion-text></ion-label>
                      <ion-input type="password" formControlName="newPassword"></ion-input>
                      <!-- Password Validation-->
                      <div class="validation-errors">
                      <ng-container *ngFor="let validation of validationMessasges.password">
                        <div class="validation-error-message"
                        *ngIf="newPasswordForm
                          .get('newPassword')
                          .hasError(validation.type) && (newPasswordForm.get('newPassword')
                          .dirty || newPasswordForm.get('newPassword').touched)">
                          {{ validation.message }}
                        </div>
                      </ng-container>
                      </div>
                    </ion-item>
                    <ion-item>
                      <ion-label position="floating">Re-type New Password <ion-text color="danger">*</ion-text></ion-label>
                      <ion-input type="password" formControlName="reTypeNewPassword"></ion-input>
                      <!-- Password Validation-->
                      <div class="validation-errors">
                      <ng-container *ngFor="let validation of validationMessasges.password">
                        <div class="validation-error-message"
                        *ngIf="newPasswordForm
                          .get('reTypeNewPassword')
                          .hasError(validation.type) && (newPasswordForm.get('reTypeNewPassword')
                          .dirty || newPasswordForm.get('reTypeNewPassword').touched)">
                          {{ validation.message }}
                        </div>
                      </ng-container>
                      </div>
                    </ion-item>
  
                    <div class="spacer-5x"></div>
                    <ion-item
                      (click)="swiper.slideNext()"
                      class="ion-text-center" 
                      lines="none" 
                      button>
                      <ion-label>Next</ion-label>
                    </ion-item>
                    <ion-item
                      (click)="this.closeForgotPasswordModal()"
                      class="ion-text-center" 
                      lines="none" 
                      button>
                      <ion-label>Cancel</ion-label>
                    </ion-item>
                    
                  </form>
                </ng-template>
            </swiper>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-content>
  </ng-template>
</ion-modal>
</ion-content>

<ion-footer>
    <ion-button style="display: block;" 
    id="login-button" 
    color="success" 
    type="submit" 
    >
    Login
    </ion-button>
    <!-- [disabled]="contactForm.invalid" -->
    <ion-button id="register-button" style="display: block;" (click)="goToRegisterPage()" color="medium">
    Register
    </ion-button>
</ion-footer>
