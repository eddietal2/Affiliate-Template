<!-- Mobile Header -->
<ion-header class="ion-hide-lg-up">
  <ion-toolbar>
    <ion-buttons slot="start">
      <!-- Logo -->
      <img id="logo" height="30" src="../../../assets/placeholders/placeholder-logo.svg" alt="Logo">
      <!-- Searchbar -->
      <ion-searchbar 
        placeholder="Search"
        nputmode="decimal" 
        type="decimal" 
        [debounce]="750"
        (ionChange)="onSearchChange($event)"
        showCancelButton="always">
      </ion-searchbar>
    </ion-buttons>

    <!-- Filter -->
    <ion-buttons slot="end">
      <ion-button (click)="openFilterActionSheet()">
        <ion-icon name="filter-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content #productsPageContent [scrollEvents]="true" (ionScroll)="scrollPosition($event)">
  <div id="featured-return-position"></div>
  <ion-grid>

    <!-- Skeleton UI -->
    <div *ngIf="this.skeletonData">
      <div class="ion-padding custom-skeleton">
        <ion-list>
          <ion-item lines="none">
            <ion-label>
              <h3>
                <ion-skeleton-text class="is-square" animated></ion-skeleton-text>
              </h3>
              <p>
                <ion-skeleton-text class="is-text" animated style="width: 80%"></ion-skeleton-text>
              </p>
              <p>
                <ion-skeleton-text class="is-text" animated style="width: 70%"></ion-skeleton-text>
              </p>
              <p>
                <ion-skeleton-text class="is-text" animated style="width: 60%"></ion-skeleton-text>
              </p>
            </ion-label>
          </ion-item>
        </ion-list>
      </div>
    </div>

    <!-- Products -->
    <ng-container *ngIf="!this.searching">
      <ion-accordion-group 
        value="all" 
        id="accordian-group"
        (ionChange)="accordianChange($event)">
        <!-- Featured Products -->
        <ion-accordion value="featured" id="featured-products-accordian">
          <ion-item style="background: #ffdcca;" id="featured-products-item" lines="none" slot="header">
            <ion-label>Featured Products | 3</ion-label>
            <ion-icon name="pricetag-outline" slot="start"></ion-icon>
          </ion-item>
          <ion-list slot="content">
            <!-- Featured Products -->
            <swiper
      id="featured-swiper"
      [config]="featuredSwipeConfig" 
      (swiper)="onSwiper($event)">
        <ng-template swiperSlide *ngFor="let featuredProduct of staticFeaturedProducts">
          <ion-row
            (click)="goToProductPage()"
            class="featured-product product-wrapper ion-justify-content-center">
            <ion-col class="product-photo" size="6">

            </ion-col>
            <ion-col size="6">
              <p id="product-price">{{featuredProduct.price}}</p>
              <h6>{{featuredProduct.title}}</h6>
              <p class="duration">Duration: {{featuredProduct.duration}}</p>
              <div id="star-container">
                
              </div>
              <div class="product-message-green"></div>
              <div class="product-message-red"></div>
              <ion-toolbar>
                <ion-buttons slot="end">
                  <ion-button (click)="favorites()">
                    <ion-icon slot="start" name="heart"></ion-icon>
                  </ion-button>
                </ion-buttons>
              </ion-toolbar>
            </ion-col>
          </ion-row>
        </ng-template>
            </swiper>
          </ion-list>
        </ion-accordion>
        <!-- Favorite Products -->
        <ion-accordion value="favorites" id="favorite-products-accordian">
          <ion-item id="favorite-products-item" lines="none" slot="header">
            <ion-label>Favorite Products | 3</ion-label>
            <ion-icon name="heart" slot="start"></ion-icon>
          </ion-item>
      
          <ion-list slot="content">
        
            <!-- Products -->
            <!-- Using same data from Featured data for now -->
            <div *ngFor="let product of staticFeaturedProducts">
                <ion-row
                (click)="goToProductPage()"
                class="product-wrapper ion-justify-content-center">
                <ion-col class="product-photo" size="6">
          
                </ion-col>
                <ion-col size="6">
                  <h6>{{product.title}}</h6>
                  <p class="duration">Duration: {{product.duration}}</p>
                  <div id="star-container">
                    
                  </div>
                  <p id="product-price">{{product.price}}</p>
                  <div class="product-message-green"></div>
                  <div class="product-message-red"></div>
                  <ion-toolbar>
                    <ion-buttons slot="end">
                      <ion-button (click)="favorites()">
                        <ion-icon slot="start" name="heart"></ion-icon>
                      </ion-button>
                    </ion-buttons>
                  </ion-toolbar>
                </ion-col>
                </ion-row>
            </div>
          </ion-list>
        </ion-accordion>
        <!-- All Products -->
        <ion-accordion value="all" id="all-products-accordian">
          <ion-item id="all-products-item" slot="header" lines="none">
            <ion-label>All Products | {{staticProducts.length}}</ion-label>
            <ion-icon name="list-outline" slot="start"></ion-icon>
          </ion-item>
      
          <ion-list slot="content">

            <!-- Results Bar -->
            <ion-row class="ion-justify-content-center">
              <ion-col size-xs="11" size-sm="10" size-md="8" size-lg="8">
                <ion-toolbar id="results-bar">
                  <ion-buttons slot="start">
                    <p *ngIf="!this.filtering || !this.searching">
                      Results: {{filterOption}}
                    </p>
                    <span *ngIf="this.filtering">
                      <ion-spinner></ion-spinner>
                    </span>
                  </ion-buttons>
                </ion-toolbar>
              </ion-col>
            </ion-row>
        
            <!-- Horizontal Categories -->
            <ion-row id="categories" class="ion-justify-content-center">
              <ion-col size-xs="11" size-sm="10" size-md="8" size-lg="8">
                <div class="spacer-1x"></div>
                <swiper
                  id="category-swiper"
                  [config]="categorySwipeConfig" 
                  (swiper)="onSwiper($event)">
                    <ng-template swiperSlide><p class="category">All</p></ng-template>
                    <ng-template swiperSlide><p class="category">Slide 2</p></ng-template>
                    <ng-template swiperSlide><p class="category">Slide 3</p></ng-template>
                    <ng-template swiperSlide><p class="category">Slide 3</p></ng-template>
                    <ng-template swiperSlide><p class="category">Slide 3</p></ng-template>
                    <ng-template swiperSlide><p class="category">Slide 3</p></ng-template>
                </swiper>

              </ion-col>
            </ion-row>

            <div id="fab-visible-position"></div>
        
            <!-- Products -->
            <div *ngFor="let product of staticProducts">
                <ion-row
                (click)="goToProductPage()"
                class="product-wrapper ion-justify-content-center">
                <ion-col class="product-photo" size="6">
          
                </ion-col>
                <ion-col size="6">
                  <h6>{{product.title}}</h6>
                  <p class="duration">Duration: {{product.duration}}</p>
                  <div id="star-container">
                    
                  </div>
                  <p id="product-price">{{product.price}}</p>
                  <div class="product-message-green"></div>
                  <div class="product-message-red"></div>
                  <ion-toolbar>
                    <ion-buttons slot="end">
                      <ion-button (click)="favorites()">
                        <ion-icon slot="start" name="heart"></ion-icon>
                      </ion-button>
                    </ion-buttons>
                  </ion-toolbar>
                </ion-col>
                </ion-row>
            </div>
          </ion-list>
        </ion-accordion>
      </ion-accordion-group>
    </ng-container>
  </ion-grid>

  <ion-fab 
    (click)="scrollToTop()"
    id="fab-button" 
    vertical="bottom" 
    horizontal="end" 
    slot="fixed">
    <ion-fab-button>
      <ion-icon name="chevron-up-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
